<div>
    <h2>Agregar producto</h2>
    <form id="myform" action="">
        <label for="texto">Titulo</label>
        <input id="title" type="text"/>
            <label for="texto">Descripcion</label>
        <input id="description" type="text"/>
                <label for="codigo">Code</label>
        <input id="code" type="string"/>
            <label for="texto">Precio</label>
        <input id="precio" type="number"/>
                <label for="texto">Stock</label>
        <input id="stock" type="number"/>
                <label for="category">Category</label>
        <input id="category" type="text"/>
                      <label for="category">Thumbnail</label>
        <input id="thumbnail" type="text"/>
        <button type="submit">Agregar</button>
        </form>
        <h2>Eliminar Producto</h2>
        <form id="formdelete" >
            <label for="iddelete">Id de producto a eliminar : </label>
            <input id="iddelete" type="number"/>
            <button type="submit">Eliminar Producto</button>
        </form>

    
    <div id="products"> los productos agregados hasta el momento son: <li>{{products}}</li> </div>
</div>
<script src="https://cdn.socket.io/4.6.0/socket.io.min.js" integrity="sha384-c79GN5VsunZvi+Q/WObgk2in0CbZsHnjEqvFxC5DxHn9lTfNce2WW6h2pH6u/kF+" crossorigin="anonymous"></script>
<script >
    const socket = io()
    let myform = document.getElementById('myform')
    myform.addEventListener('submit', function(event){
        event.preventDefault()
        const productTitle = document.getElementById('title').value;
        const descriptionProduct = document.getElementById('description').value;
        const codeProduct = document.getElementById('code').value;
        const precioProduct = parseInt(document.getElementById('precio').value);
        const stockProduct = parseInt(document.getElementById('stock').value);
        const categoryTitle = document.getElementById('category').value;
        const thumbnailTitle = document.getElementById('thumbnail').value;
        let productnew = {title:productTitle, description:descriptionProduct, code: codeProduct, price:precioProduct, thumbnail:thumbnailTitle, stock: stockProduct,category: categoryTitle}
        socket.emit('agregando_producto', productnew)
        console.log(productnew)
        let listaproducts = document.getElementById('products')
         socket.on('productos_actualizadosadd', async (data)=>{
    listaproducts.innerHTML=''
    data.forEach(product=>{
        let li = document.createElement('li')
        li.innerText= product
        listaproducts.appendChild(li)
    })
  })
        })
let formdelete = document.getElementById('formdelete');
formdelete.addEventListener('submit', function(event) {
  event.preventDefault();
  let iddelete = parseInt(document.getElementById('iddelete').value);
  socket.emit('eliminando_producto', iddelete);
  let listaproducts = document.getElementById('products')
  socket.on('productos_actualizados', async (data)=>{
    listaproducts.innerHTML=''
    data.forEach(product=>{
        let li = document.createElement('li')
        li.innerText= product
        listaproducts.appendChild(li)
    })
  })
});
    

</script>